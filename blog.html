<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog - Przemyślenia o technologii</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      color: #333;
    }
    .post {
      border-bottom: 1px solid #eee;
      padding: 20px 0;
      margin-bottom: 20px;
    }
    .post h2 {
      margin-bottom: 10px;
    }
    .post-meta {
      color: #666;
      font-size: 0.9em;
      margin-bottom: 15px;
    }
    .post-excerpt {
      margin-bottom: 15px;
    }
    .read-more {
      color: #0066cc;
      text-decoration: none;
    }
    .loading {
      text-align: center;
      padding: 40px;
      color: #666;
    }
    .newsletter {
      background: #f5f5f5;
      padding: 20px;
      border-radius: 8px;
      margin: 40px 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>Blog</h1>
    <p>Przemyślenia o technologii, rozwoju i ludzkiej naturze</p>
  </header>

  <main>
    <div id="blog-posts" class="loading">
      Ładowanie postów...
    </div>
  </main>

  <section class="newsletter">
    <h3>Otrzymuj powiadomienia o nowych artykułach</h3>
    <form name="newsletter" method="POST" data-netlify="true">
      <input type="email" name="email" placeholder="Twój email" required>
      <button type="submit">Zapisz się</button>
      <div style="display: none;">
        <input name="bot-field">
      </div>
    </form>
  </section>

  <script>
    // Funkcja do ładowania i wyświetlania postów
    async function loadBlogPosts() {
      try {
        // Pobierz listę plików z GitHub API lub użyj statycznej listy
        const posts = await fetchPosts();
        displayPosts(posts);
      } catch (error) {
        console.error('Błąd ładowania postów:', error);
        document.getElementById('blog-posts').innerHTML = 
          '<p>Nie udało się załadować postów. Spróbuj ponownie później.</p>';
      }
    }

    async function fetchPosts() {
      // Tutaj możesz zaimplementować pobieranie postów z GitHub API
      // lub użyć statycznej listy postów
      
      // Przykład statycznej listy (zastąp prawdziwymi danymi):
      return [
        {
          title: "Pierwszy post testowy",
          date: "2025-05-27",
          excerpt: "To jest przykładowy post na blogu...",
          slug: "pierwszy-post-testowy",
          category: "Technologia",
          readTime: "3 min czytania"
        }
      ];
    }

    function displayPosts(posts) {
      const container = document.getElementById('blog-posts');
      
      if (posts.length === 0) {
        container.innerHTML = '<p>Brak postów do wyświetlenia.</p>';
        return;
      }

      const postsHTML = posts.map(post => `
        <article class="post">
          <h2><a href="/blog/${post.slug}" class="read-more">${post.title}</a></h2>
          <div class="post-meta">
            ${post.date} • ${post.category} • ${post.readTime || ''}
          </div>
          <div class="post-excerpt">
            ${post.excerpt}
          </div>
          <a href="/blog/${post.slug}" class="read-more">Czytaj więcej →</a>
        </article>
      `).join('');

      container.innerHTML = postsHTML;
    }

    // Załaduj posty po załadowaniu strony
    document.addEventListener('DOMContentLoaded', loadBlogPosts);
  </script>
</body>
</html>
